import sys
import json
import estatico



# Obtener el nombre del archivo JSON como argumento


if len(sys.argv) == 2:

    archivo_json = sys.argv[1]
    # Leer el archivo JSON
    try:
        with open(archivo_json, 'r') as archivo:

            contenido_json = archivo.read()
            datos = json.loads(contenido_json)

            #guardamos los datos del json
            programa = datos.get('programa')
            tipo_analisis = datos.get('tipo_analisis')
            nombre_analisis = datos.get('nombre_analisis')

            #obtenemos si el analisis es estatico o dinamico
            if tipo_analisis == 'estatico':
                estatico.analisis(programa, nombre_analisis)
            else:
                print("Tipo de an치lisis no v치lido. Debe ser 'estatico' o 'dinamico'.")
    except FileNotFoundError:
        print(f"No se pudo encontrar el archivo JSON '{archivo_json}'.")
    except json.JSONDecodeError:
        print(f"El archivo JSON '{archivo_json}' no es v치lido.")
else:
    print("Uso incorrecto del programa.")
    print("Debe proporcionar la ruta de un archivo JSON como par치metro.")
